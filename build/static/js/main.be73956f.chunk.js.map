{"version":3,"sources":["Components/pachong.jsx","App.js","index.js"],"names":["axios","require","DynamicTable","jsonData","column","Object","keys","className","map","data","v","Pachong","React","useState","urlToPost","setUrlToPost","scrapedObjects","setScrapedObjects","apiTrigger","setTrigger","useEffect","url","post","then","response","href","onSubmit","event","preventDefault","submittedUrl","currentTarget","elements","urlInput","value","Date","type","id","name","placeholder","COMPANY_CHINESE_FIELD_NAME","COMPANY_ENGLISH_FIELD_NAME","ADDRESS_FIELD_NAME","PHONE_NUMBER_FIELD_NAME","App","ReactDOM","render","document","getElementById"],"mappings":"6JAGMA,EAAQC,EAAQ,IAyFtB,SAASC,EAAT,GAAmC,IAAZC,EAAW,EAAXA,SAEfC,EAASC,OAAOC,KAAKH,EAAS,IAwBpC,OACE,wBAAOI,UAAU,QAAjB,UACE,gCACE,6BAvBGH,EAAOI,KAAI,SAACC,GACjB,OAAO,6BAAgBA,GAAPA,UAwBhB,gCAlBKN,EAASK,KAAI,SAACC,GACnB,OACE,6BAEIL,EAAOI,KAAI,SAACE,GACV,OAAO,6BAAKD,EAAKC,kBAoBdC,MA9GjB,WACE,MAAwBC,IAAMC,SAAS,MAAvC,mBACA,GADA,UACkCD,IAAMC,SAAS,OAAjD,mBAAOC,EAAP,KAAkBC,EAAlB,KACA,EAA4CH,IAAMC,SAAS,IAA3D,mBAAOG,EAAP,KAAuBC,EAAvB,KAEA,EAAgCL,IAAMC,SAAS,GAA/C,mBAAOK,EAAP,KAAkBC,EAAlB,KA8CA,OAnBAP,IAAMQ,WAAU,WAMhB,IAA2BC,EALtBP,IAKsBO,EAJLP,EAKpBd,EAAMsB,KAAK,cAAe,CAAC,IAAQD,IAClCE,MAAK,SAACC,GAAD,OAAcP,EAAkBO,EAASf,YAJ9C,CAACS,IAgBF,sBAAKX,UAAU,UAAf,UACE,yBAAQA,UAAU,aAAlB,UACE,yEACE,mBAAGkB,KAAK,iCAAR,mBADF,mCAIA,uBAAMC,SAfZ,SAAsBC,GACpBA,EAAMC,iBACN,IAAMC,EAAeF,EAAMG,cAAcC,SAASC,SAASC,MAC3DlB,EAAac,GACbV,GAAY,IAAIe,OAWZ,UACE,mDACE,uBACA,uBAAOC,KAAK,MAAMC,GAAG,WAAWC,KAAK,WAAWC,YAAY,yBAE9D,wBAAQH,KAAK,SAAb,0BAGJ,cAACjC,EAAD,CAAcC,SAAWa,EAAe,GAAgBA,EA5D7C,CACb,CACEuB,2BAA4B,6CAC5BC,2BAA4B,iBAC5BC,mBAAoB,8CACpBC,wBAAyB,uBCnBhBC,MAVf,WACE,OACE,qBAAKpC,UAAU,MAAf,SACE,wBAAQA,UAAU,aAAlB,SACE,cAAC,EAAD,SCHRqC,IAASC,OACP,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.be73956f.chunk.js","sourcesContent":["// import {COMPANY_CHINESE_FIELD_NAME, COMPANY_ENGLISH_FIELD_NAME, ADDRESS_FIELD_NAME, PHONE_NUMBER_FIELD_NAME} from '../constants'\r\nimport React from 'react';\r\n\r\nconst axios = require('axios');\r\nconst chineseCharRegex = /\\p{Unified_Ideograph}/u\r\n/* \r\nNOTE: you need to go here and request access by clicking the button.\r\nYou can't try to fetch info from here directly because it\r\nwill send a CORS issue which is super annoying. So the fix\r\nis to use a proxy server like the one below\r\n*/\r\n//it seems I don't need to use the proxy now that I have cors setup in my express js.\r\n//I will leave it here for reference...\r\n// const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\r\n// const proxyLocalhostURL = \"https://8080-twbluenaxel-lvchinesebu-dk524wi8o8z.ws-us47.gitpod.io/\"\r\n\r\n//https://medium.com/@stefanhyltoft/scraping-html-tables-with-nodejs-request-and-cheerio-e3c6334f661b\r\n\r\n\r\n\r\nfunction Pachong(){\r\n  const [data, setData] = React.useState(null);\r\n  const [urlToPost, setUrlToPost] = React.useState(null)\r\n  const [scrapedObjects, setScrapedObjects] = React.useState({})\r\n\r\n  const [apiTrigger,setTrigger] = React.useState(0);\r\n  let dummyObj = [\r\n    {\r\n      COMPANY_CHINESE_FIELD_NAME: '聯合律師事務所',\r\n      COMPANY_ENGLISH_FIELD_NAME: 'Parke Law Firm',\r\n      ADDRESS_FIELD_NAME: '4455 S. Jones Blvd., #1 Las Vegas, NV 89103',\r\n      PHONE_NUMBER_FIELD_NAME: '702-321-1187'\r\n    }\r\n  ]\r\n\r\n  // let urlObj = {url: `https://www.lvcnn.com/list_group.php?id=166&shop_name=&cat=&page=1`}\r\n\r\n  //change between localhost and the gitpod url\r\n  //https://3001-twbluenaxel-lvchinesebu-dk524wi8o8z.ws-us47.gitpod.io/\r\n  //this is only used for testing. I will delete it later.\r\n  // React.useEffect(() => {\r\n  //   fetch(\"http://localhost:3001/api\")\r\n  //     .then((res) => res.json())\r\n  //     .then((data) => setData(data.message));\r\n  // }, []);\r\n\r\n\r\n  // React.useEffect(() => {\r\n  //   axios.post(\"https://3001-twbluenaxel-lvchinesebu-dk524wi8o8z.ws-us47.gitpod.io/api/scrape\", urlObj)\r\n  //   .then((response) => setScrapedObjects(response.data))\r\n  // }, [])\r\n\r\n  React.useEffect(() => {\r\n    if(urlToPost){\r\n      getScrapedObjects(urlToPost);\r\n    }\r\n  }, [apiTrigger])\r\n\r\n  function getScrapedObjects(url){\r\n    axios.post(\"/api/scrape\", {\"url\" : url})\r\n    .then((response) => setScrapedObjects(response.data))\r\n  }\r\n\r\n  function handleSubmit(event){\r\n    event.preventDefault()\r\n    const submittedUrl = event.currentTarget.elements.urlInput.value\r\n    setUrlToPost(submittedUrl);\r\n    setTrigger(+new Date());\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"pachong\">\r\n      <header className=\"App-header\">\r\n        <p>Instructions: Go to any category on this \r\n          <a href=\"https://www.lvcnn.com/list.php\"> page</a>\r\n          and copy the link at the top.\r\n        </p>\r\n        <form onSubmit={handleSubmit} >\r\n          <label>LVCNN Crawler: \r\n            <br />\r\n            <input type=\"url\" id=\"urlInput\" name=\"urlInput\" placeholder='Enter url here...' />\r\n          </label>\r\n          <button type=\"submit\">Submit</button>\r\n        </form>\r\n      </header>\r\n      <DynamicTable jsonData={!scrapedObjects[0] ? dummyObj : scrapedObjects} />\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nfunction DynamicTable({jsonData}) {\r\n  //get table columns\r\n  const column = Object.keys(jsonData[0]);\r\n\r\n  //table heading\r\n  const ThData = () => {\r\n    return column.map((data) => {\r\n      return <th key={data}>{data}</th>\r\n    })\r\n  }\r\n\r\n  //table row\r\n  const tdData = () => {\r\n    return jsonData.map((data) => {\r\n      return(\r\n        <tr>\r\n          {\r\n            column.map((v) => {\r\n              return <td>{data[v]}</td>\r\n            })\r\n          }\r\n        </tr>\r\n      )\r\n    })\r\n  }\r\n\r\n  return (\r\n    <table className=\"table\">\r\n      <thead>\r\n        <tr>{ThData()}</tr>\r\n      </thead>\r\n      <tbody>\r\n        {tdData()}\r\n      </tbody>\r\n    </table>\r\n  )\r\n}\r\n\r\n  export default Pachong","import Pachong from './Components/pachong'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <Pachong />\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}