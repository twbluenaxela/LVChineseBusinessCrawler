{"version":3,"sources":["Components/pachong.jsx","App.js","index.js"],"names":["axios","require","JSDOM","DynamicTable","jsonData","column","Object","keys","className","map","data","v","InstructionsPage","href","target","CategorySelector","categories","setUrlToPost","setTrigger","id","onChange","event","currentSelectedOption","value","console","log","Date","item","CATEGORY_PAGE_LINK","name","CATEGORY_CHINESE_NAME","CATEGORY_ENGLISH_NAME","type","Pachong","React","useState","urlToPost","scrapedObjects","setScrapedObjects","apiTrigger","instructionsTrigger","setInstructionsTrigger","initialCategory","categoriesPageUrl","post","then","response","setCategories","fetchCategories","useEffect","url","onClick","preventDefault","onSubmit","submittedUrl","currentTarget","elements","urlInput","placeholder","COMPANY_CHINESE_FIELD_NAME","COMPANY_ENGLISH_FIELD_NAME","ADDRESS_FIELD_NAME","PHONE_NUMBER_FIELD_NAME","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.67481db8.chunk.js","sourcesContent":["// import {COMPANY_CHINESE_FIELD_NAME, COMPANY_ENGLISH_FIELD_NAME, ADDRESS_FIELD_NAME, PHONE_NUMBER_FIELD_NAME} from '../constants'\r\nimport React from 'react';\r\nconst axios = require('axios');\r\nconst jsdom = require(\"jsdom\");\r\nconst { JSDOM } = jsdom;\r\n\r\n/* \r\nNOTE: you need to go here and request access by clicking the button.\r\nYou can't try to fetch info from here directly because it\r\nwill send a CORS issue which is super annoying. So the fix\r\nis to use a proxy server like the one below\r\n*/\r\n//it seems I don't need to use the proxy now that I have cors setup in my express js.\r\n//I will leave it here for reference...\r\n// const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\r\n// const proxyLocalhostURL = \"https://8080-twbluenaxel-lvchinesebu-dk524wi8o8z.ws-us47.gitpod.io/\"\r\n\r\n//https://medium.com/@stefanhyltoft/scraping-html-tables-with-nodejs-request-and-cheerio-e3c6334f661b\r\n\r\n\r\n// let lvcnnCategories = document.querySelectorAll(\"td > a[href^='list_group.php?id']\")\r\n\r\n\r\n\r\nfunction Pachong(){\r\n  const [urlToPost, setUrlToPost] = React.useState(\"\")\r\n  const [scrapedObjects, setScrapedObjects] = React.useState({})\r\n  const [apiTrigger,setTrigger] = React.useState(0);\r\n  const [instructionsTrigger, setInstructionsTrigger] = React.useState(false)\r\n  const [categories, setCategories] = React.useState(() => {\r\n    const initialCategory = fetchCategories()\r\n    return (initialCategory)\r\n  })\r\n \r\n  const categoriesPageUrl = \"https://www.lvcnn.com/list.php\"\r\n\r\n\r\n  let dummyObj = [\r\n    {\r\n      COMPANY_CHINESE_FIELD_NAME: '聯合律師事務所',\r\n      COMPANY_ENGLISH_FIELD_NAME: 'Parke Law Firm',\r\n      ADDRESS_FIELD_NAME: '4455 S. Jones Blvd., #1 Las Vegas, NV 89103',\r\n      PHONE_NUMBER_FIELD_NAME: '702-321-1187'\r\n    }\r\n  ]\r\n\r\n  React.useEffect(() => {\r\n    if(urlToPost){\r\n      getScrapedObjects(urlToPost);\r\n    }\r\n  }, [apiTrigger])\r\n\r\n  function fetchCategories() {\r\n    const categoriesPageUrl = \"https://www.lvcnn.com/list.php\"\r\n    axios\r\n    .post(\"/api/category\", {\"url\" : categoriesPageUrl})\r\n    .then((response) => {\r\n      // console.log(response.data)\r\n      setCategories(response.data)\r\n    })\r\n  }\r\n\r\n  function getScrapedObjects(url){\r\n    axios\r\n    .post(\"/api/scrape\", {\"url\" : url})\r\n    .then((response) => setScrapedObjects(response.data))\r\n  }\r\n\r\n  function handleSubmit(event){\r\n    event.preventDefault()\r\n    const submittedUrl = event.currentTarget.elements.urlInput.value\r\n    setUrlToPost(submittedUrl);\r\n    setTrigger(+new Date());\r\n  }\r\n\r\n\r\n  function handleClickInstructions(event){\r\n    event.preventDefault()\r\n    setInstructionsTrigger(instructionsTrigger => !instructionsTrigger)\r\n  }\r\n\r\n  return (\r\n    <div className=\"pachong\">\r\n      <header className=\"App-header\">\r\n        <div className='flex justify-start p-3 bg-sky-200 rounded-md mb-3 shadow-lg '>\r\n          <h1 className=\"self-auto text-3xl font-bold hover:underline \" >拉斯維加斯商業地區爬蟲🐛</h1>\r\n          <button className='transition ease-in-out delay-150 bg-blue-500 rounded-full shadow-lg shadow-blue-500/50 hover:-translate-y-1 hover:scale-110 hover:bg-indigo-500 shadow-indigo-500/50 duration-300' onClick={handleClickInstructions} >\r\n            🙍🏻‍♀️❓\r\n          </button>\r\n        </div>\r\n        {instructionsTrigger && <InstructionsPage />}\r\n        {categories && <CategorySelector categories={categories} setUrlToPost={setUrlToPost} setTrigger={setTrigger} /> }\r\n        <form onSubmit={handleSubmit} className=\"mb-4\" >\r\n          <label><a href=\"https://www.lvcnn.com/list.php\" target=\"_blank\" className='font-extrabold underline' >LVCNN</a> Crawler:\r\n            <br />\r\n            <input className='outline outline-offset-2 outline-sky-200 rounded-sm shadow-inner ' type=\"url\" id=\"urlInput\" name=\"urlInput\" placeholder='Enter url here...' />\r\n          </label>\r\n          <button className='ring ring-offset-2 ring-blue-500 bg-slate-400 rounded-sm ml-2 ' type=\"submit\">Submit</button>\r\n        </form>\r\n      </header>\r\n      <DynamicTable jsonData={!scrapedObjects[0] ? dummyObj : scrapedObjects} />\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nfunction DynamicTable({jsonData}) {\r\n  //get table columns\r\n  const column = Object.keys(jsonData[0]);\r\n\r\n  //table heading\r\n  const ThData = () => {\r\n    return column.map((data) => {\r\n      return <th className=\"border border-green-400 bg-green-300 \" key={data} >{data}</th>\r\n    })\r\n  }\r\n\r\n  //table row\r\n  const tdData = () => {\r\n    return jsonData.map((data) => {\r\n      return(\r\n        <tr>\r\n          {\r\n            column.map((v) => {\r\n              return <td className='border border-green-200 bg-green-100' >{data[v]}</td>\r\n            })\r\n          }\r\n        </tr>\r\n      )\r\n    })\r\n  }\r\n\r\n  return (\r\n    <table className=\"border-separate border-spacing-x-2\">\r\n      <thead >\r\n        <tr>{ThData()}</tr>\r\n      </thead>\r\n      <tbody>\r\n        {tdData()}\r\n      </tbody>\r\n    </table>\r\n  )\r\n}\r\n\r\nfunction InstructionsPage(){\r\n  return(\r\n    <div className='bg-amber-100 p-3 mt-3 mb-3 shadow-md transition-all duration-200' >\r\n      <h2 className='text-xl font-bold'>使用説明 Instructions</h2>\r\n      <ul className=\"list-disc list-inside\">\r\n        <li className='font-medium'>先訪問這個網站 First visit this website\r\n          <a href=\"https://www.lvcnn.com/list.php\" target=\"_blank\" className='font-extrabold underline decoration-amber-300' > LVCNN</a>\r\n        </li>\r\n        <li className='font-medium'>然後點擊一個類型(如:廣告設計)Then choose a category (ex: Advertising)</li>\r\n        <li className='font-medium'>然後把上面的網址複製一下，之後可以粘貼到下面的輸入框框裏面</li>\r\n        <li className='font-medium'>Then copy the url at the top, and put it in the input box below</li>\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction CategorySelector({categories, setUrlToPost, setTrigger}) {\r\n  // console.log(\"I am alive!\")\r\n  const CategoryOptions = () => {\r\n    return categories.map((item) => {\r\n      return <option value={item.CATEGORY_PAGE_LINK} name={item.CATEGORY_CHINESE_NAME} id={item.CATEGORY_CHINESE_NAME} >{item.CATEGORY_CHINESE_NAME + \" \" + item.CATEGORY_ENGLISH_NAME}</option>\r\n    })\r\n  }\r\n\r\n  // const handleFormSubmit = (event) => {\r\n  //   const urlToSubmit = event.target.value\r\n  //   console.log(urlToSubmit)\r\n  // }\r\n\r\n  const handleChange = (event) => {\r\n    const currentSelectedOption = event.target.value\r\n    console.log(\"This is what you selected: \")\r\n    console.log(currentSelectedOption)\r\n    setUrlToPost(\"https://www.lvcnn.com/\" + currentSelectedOption)\r\n    setTrigger(+new Date());\r\n  }\r\n\r\n\r\n  return(\r\n    <div>\r\n        <select id=\"chooseCategory\" onChange={handleChange}>\r\n        {CategoryOptions()}\r\n        </select>\r\n        <button className='ring ring-offset-2 ring-blue-500 bg-slate-400 rounded-sm ml-2' type=\"submit\">Submit</button>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n  export default Pachong","import Pachong from './Components/pachong'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <Pachong />\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","import ReactDOM from 'react-dom'\nimport App from './App'\nimport \"./dist/output.css\"\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}